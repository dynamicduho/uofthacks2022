<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Signup - Safeline.ai</title>
    <link href="signup.css" rel="stylesheet" type="text/css" />
     <link
     rel="stylesheet"
     href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.css"
   />
   <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>

  </head>
  <body>
    <h1>Sign Up</h1>
   <form>
    <div class="signupform">
    <p style="color: white;" id="phonenum">Phone Number: </p>
    <input id="phone" type="tel" name="phone" />
    <p>Name: </p>
    <input id="name" type="text" name="name" />
    <p>Date of Birth: </p>
    <input id="date" type="date" name="date" />
    <p>Home Address:  </p>
    <input id="address" type="text" name="address" />
    <p>Codewords: </p>
    <input id="code" type="text" name="code" placeholder="ex: banana, jane, milk" />
    <br></br>
    </div>
     <button id="submit">SUBMIT</button>
</form>
    <div class="alert alert-info" style="display: none;"></div>

    <img src="img/bg.png">



 

<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.1.0/firebase-app.js";


 const firebaseConfig = {
  apiKey: "AIzaSyC5tZAcpiaGwUAo0NnK3iO3LToMNRisqI0",
  authDomain: "uofthacks2022.firebaseapp.com",
  projectId: "uofthacks2022",
  storageBucket: "uofthacks2022.appspot.com",
  messagingSenderId: "125311308975",
  appId: "1:125311308975:web:0eb8603051787f04f1f05a"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  
  import { getFirestore, doc, setDoc, getDoc, collection, addDoc} from "https://www.gstatic.com/firebasejs/9.1.0/firebase-firestore.js";


   const db = getFirestore();


  // add to database function


  async function adduser() {
  console.log("function fired");
  window.open("/success.html");
  var ref = collection(db, "users");
  const docRef = await addDoc (
    ref, {
    phone: document.getElementById("phone").value, 
    name: document.getElementById("name").value, 
    codeword: document.getElementById("code").value,
    address: document.getElementById("address").value
  })
    
  
}

  const element = document.getElementById("submit");
  console.log("okay at least it works this far");
  element.addEventListener("click", adduser);
  
      
 </script>
    
 <script>


   //international phone number system
    const phoneInputField = document.querySelector("#phone");
   const phoneInput = window.intlTelInput(phoneInputField, {
     utilsScript:
       "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js",
   });

      function process(event) {
 event.preventDefault();

 const phoneNumber = phoneInput.getNumber();

 info.style.display = "";
 info.innerHTML = `Phone number in E.164 format: <strong>${phoneNumber}</strong>`;
}
</script>
<!-- <script src="script.js"></script> -->
  </body>
</html>